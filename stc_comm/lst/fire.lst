C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE FIRE
OBJECT MODULE PLACED IN .\out\fire.obj
COMPILER INVOKED BY: C:\Programs86\Keil\C51\BIN\C51.EXE fire.c LARGE OPTIMIZE(9,SPEED) BROWSE DEBUG OBJECTEXTEND CODE PR
                    -INT(.\lst\fire.lst) OBJECT(.\out\fire.obj)

line level    source

   1          #include "reg51.h"
   2          #include "intrins.h"
   3          #include "uart.h"
   4          #include "flash_chip.h"
   5          
   6             
   7          sfr WDT_CONTR = 0xE1;
   8          
   9          sbit CDATA       = P2^0;
  10          sbit HDATA       = P2^1;
  11          sbit COMREQ  = P2^2;
  12          sbit COMSYNC = P2^3;
  13          sbit COMCLK  = P2^4;
  14          
  15          #define BUF_LEN 768                                                
  16          unsigned char xdata buff[BUF_LEN] = {0};
  17          
  18          
  19          #define R1(x) buff[i] = P2;
  20          #define R2(x)   R1(x)   R1(x+1)
  21          #define R4(x)   R2(x)   R2(x+2)
  22          #define R8(x)   R4(x)   R4(x+4)
  23          #define R16(x)  R8(x)   R8(x+8)
  24          #define R32(x)  R16(x)  R16(x+16)
  25          #define R64(x)  R32(x)  R32(x+32)
  26          #define R128(x) R64(x)  R64(x+64)
  27          #define R256(x) R128(x) R128(x+128)
  28          
  29          BYTE rbit;
  30          BYTE rbuff[20];
  31          int ri;
  32          
  33          
  34          //
  35          // 当收到 req 信号时, 认为新的字节到达
  36          //
  37          void cd_on_req() interrupt 1 {
  38   1              // 当 comsync 被拉下, 是一个新指令序列的开始
  39   1              if (COMSYNC == 0) {
  40   2                      ri = 0;
  41   2                      rbit = 0;
  42   2              } else {
  43   2                      rbuff[ri] = rbit;
  44   2                      ++ri;
  45   2                      rbit = 0;
  46   2              }
  47   1              SendData(1); 
  48   1      }
  49          
  50          
  51          //
  52          // 每个 clk 信号是一个 bit
  53          //
  54          void cd_on_clk() interrupt 0 {
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 2   

  55   1              rbit <<= 1;
  56   1              rbit |= CDATA;
  57   1      }
  58          
  59          
  60          //
  61          // 启动 cd-rom 读取
  62          // 启动后, req 和 sync 有两次间隔的下降沿, 通知主控初始化完成
  63          //
  64          void cd_run() {
  65   1              int ori, change = 0, i;
  66   1      
  67   1              IT0 = 1;
  68   1              EX0 = 1;
  69   1              IT1 = 1;
  70   1              EX1 = 1;
  71   1              EA  = 1;
  72   1      
  73   1              ri = 0;
  74   1              ori = 0;
  75   1              rbit = 0;
  76   1      
  77   1              for(;;) {
  78   2                      if (ori != ri) {
  79   3                              ori = ri;
  80   3                              change = 0;
  81   3                      } else {
  82   3                              if (++change > 10 ) {
  83   4                                       for (i=0; i<20; ++i) {
  84   5                                              SendData(rbuff[i]);
  85   5                                              rbuff[i] = 0;
  86   5                                      }
  87   4                                      SendData(0xFF);
  88   4                              }
  89   3                      }
  90   2              }
  91   1      }
  92          
  93          
  94          void test_pin_slow() {
  95   1              BYTE a, b, c;
  96   1              int count = 0, i;
  97   1              for (;;) {      
  98   2                      a = P2;
  99   2                      b = P2;
 100   2                      if (a != b) {
 101   3                        SendData(a);
 102   3                        SendData(b);
 103   3                        SendData((count & 0xFF00) >> 8);
 104   3                        SendData(count & 0xFF);
 105   3                        SendData(0xFF);
 106   3                        //SendData(0);
 107   3                        count = 0;
 108   3                      } else {
 109   3                              ++count;
 110   3                      }
 111   2              }
 112   1      }
*** WARNING C280 IN LINE 95 OF FIRE.C: 'c': unreferenced local variable
*** WARNING C280 IN LINE 96 OF FIRE.C: 'i': unreferenced local variable
 113          
 114          
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 3   

 115          void test_buff() {
 116   1              int count = 0, i;
 117   1              for (;;) {
 118   2                      for (i=0; i<BUF_LEN; i+=16) {
 119   3                              buff[i] = P2;
 120   3                              buff[i+1] = P2;
 121   3                              buff[i+2] = P2;
 122   3                              buff[i+3] = P2;
 123   3                              buff[i+4] = P2;
 124   3                              buff[i+5] = P2;
 125   3                              buff[i+6] = P2;
 126   3                              buff[i+7] = P2;
 127   3                              buff[i+8] = P2;
 128   3                              buff[i+9] = P2;
 129   3                              buff[i+10] = P2;
 130   3                              buff[i+11] = P2;
 131   3                              buff[i+12] = P2;
 132   3                              buff[i+13] = P2;
 133   3                              buff[i+14] = P2;
 134   3                              buff[i+15] = P2;
 135   3                      }
 136   2                      for (i=0; i<BUF_LEN; ++i) {
 137   3                              SendData(buff[i]);
 138   3                      }
 139   2              }
 140   1      }
 141          
 142          
 143          //
 144          // 测试串口通信有效性
 145          //
 146          void test_uart() {
 147   1              BYTE a;
 148   1              for (a=0;; ++a) {
 149   2                      SendData(a);
 150   2              }
 151   1      }
 152          
 153          
 154          void main()
 155          {    
 156   1          //WDT_CONTR = 0x20;
 157   1              //P0 = 0x01;     
 158   1              int buffi, i = 0;
 159   1              BYTE nextclk = 1;        
 160   1              BYTE clk;
 161   1      
 162   1              P2 = 0x1F; //0x1F;                                
 163   1          init_uart();
 164   1      
 165   1              cd_run();
 166   1              //test_uart();
 167   1              //test_buff();
 168   1              //test_pin_slow();
 169   1      
 170   1              for (;;) {
 171   2                      buffi = 0;
 172   2                      for (;;) {
 173   3                              clk = COMCLK;
 174   3                              if (clk == nextclk) {
 175   4                                      buff[buffi] = P2;                       
 176   4                                      nextclk = clk ? 0 : 1;
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 4   

 177   4                                      if (++buffi >= BUF_LEN) break;
 178   4                              }
 179   3                      }
 180   2                      for (i=0; i<BUF_LEN; ++i) {
 181   3                              SendData(buff[i]);
 182   3                      }
 183   2              }
 184   1      }
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 5   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com0034 (BEGIN)
0000         L?0053:
0000 7400        R     MOV     A,#LOW buff
0002 2F                ADD     A,R7
0003 F582              MOV     DPL,A
0005 7400        R     MOV     A,#HIGH buff
0007         L?0054:
0007 3E                ADDC    A,R6
0008 F583              MOV     DPH,A
000A E5A0              MOV     A,P2
000C F0                MOVX    @DPTR,A
000D 22                RET     
000E         L?0055:
000E 900000      R     MOV     DPTR,#i
0011         L?0056:
0011 E0                MOVX    A,@DPTR
0012 FE                MOV     R6,A
0013 A3                INC     DPTR
0014 E0                MOVX    A,@DPTR
0015 FF                MOV     R7,A
0016         L?0057:
0016 C3                CLR     C
0017 EE                MOV     A,R6
0018 6480              XRL     A,#080H
001A 9483              SUBB    A,#083H
001C 22                RET     
001D         L?0058:
001D 7400        R     MOV     A,#LOW buff
001F 2F                ADD     A,R7
0020 F582              MOV     DPL,A
0022 7400        R     MOV     A,#HIGH buff
0024 3E                ADDC    A,R6
0025 F583              MOV     DPH,A
0027 E0                MOVX    A,@DPTR
0028 FF                MOV     R7,A
0029 22                RET     
             ; FUNCTION Com0034 (END)

             ; FUNCTION cd_on_req (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A 75D000            MOV     PSW,#00H
000D C000              PUSH    AR0
000F C001              PUSH    AR1
0011 C002              PUSH    AR2
0013 C003              PUSH    AR3
0015 C004              PUSH    AR4
0017 C005              PUSH    AR5
0019 C006              PUSH    AR6
001B C007              PUSH    AR7
                                           ; SOURCE LINE # 37
                                           ; SOURCE LINE # 39
001D 20A30D            JB      COMSYNC,?C0001
                                           ; SOURCE LINE # 40
0020 900000      R     MOV     DPTR,#ri
0023 E4                CLR     A
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 6   

0024 F0                MOVX    @DPTR,A
0025 A3                INC     DPTR
0026 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 41
0027 900000      R     MOV     DPTR,#rbit
002A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 42
002B 8028              SJMP    ?C0002
002D         ?C0001:
                                           ; SOURCE LINE # 43
002D 900000      R     MOV     DPTR,#rbit
0030 E0                MOVX    A,@DPTR
0031 FF                MOV     R7,A
0032 A3                INC     DPTR
0033 E0                MOVX    A,@DPTR
0034 FC                MOV     R4,A
0035 A3                INC     DPTR
0036 E0                MOVX    A,@DPTR
0037 2400        R     ADD     A,#LOW rbuff
0039 F582              MOV     DPL,A
003B 7400        R     MOV     A,#HIGH rbuff
003D 3C                ADDC    A,R4
003E F583              MOV     DPH,A
0040 EF                MOV     A,R7
0041 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 44
0042 900000      R     MOV     DPTR,#ri+01H
0045 E0                MOVX    A,@DPTR
0046 04                INC     A
0047 F0                MOVX    @DPTR,A
0048 7006              JNZ     ?C0044
004A 900000      R     MOV     DPTR,#ri
004D E0                MOVX    A,@DPTR
004E 04                INC     A
004F F0                MOVX    @DPTR,A
0050         ?C0044:
                                           ; SOURCE LINE # 45
0050 900000      R     MOV     DPTR,#rbit
0053 E4                CLR     A
0054 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 46
0055         ?C0002:
                                           ; SOURCE LINE # 47
0055 7F01              MOV     R7,#01H
0057 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 48
005A D007              POP     AR7
005C D006              POP     AR6
005E D005              POP     AR5
0060 D004              POP     AR4
0062 D003              POP     AR3
0064 D002              POP     AR2
0066 D001              POP     AR1
0068 D000              POP     AR0
006A D0D0              POP     PSW
006C D082              POP     DPL
006E D083              POP     DPH
0070 D0F0              POP     B
0072 D0E0              POP     ACC
0074 32                RETI    
             ; FUNCTION cd_on_req (END)

C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 7   

             ; FUNCTION cd_on_clk (BEGIN)
0000 C0E0              PUSH    ACC
0002 C083              PUSH    DPH
0004 C082              PUSH    DPL
0006 C0D0              PUSH    PSW
0008 75D000            MOV     PSW,#00H
000B C007              PUSH    AR7
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
000D 900000      R     MOV     DPTR,#rbit
0010 E0                MOVX    A,@DPTR
0011 25E0              ADD     A,ACC
0013 FF                MOV     R7,A
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 56
0015 A2A0              MOV     C,CDATA
0017 E4                CLR     A
0018 33                RLC     A
0019 4F                ORL     A,R7
001A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 57
001B D007              POP     AR7
001D D0D0              POP     PSW
001F D082              POP     DPL
0021 D083              POP     DPH
0023 D0E0              POP     ACC
0025 32                RETI    
             ; FUNCTION cd_on_clk (END)

             ; FUNCTION cd_run (BEGIN)
                                           ; SOURCE LINE # 64
                                           ; SOURCE LINE # 65
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#change
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 67
0007 D288              SETB    IT0
                                           ; SOURCE LINE # 68
0009 D2A8              SETB    EX0
                                           ; SOURCE LINE # 69
000B D28A              SETB    IT1
                                           ; SOURCE LINE # 70
000D D2AA              SETB    EX1
                                           ; SOURCE LINE # 71
000F D2AF              SETB    EA
                                           ; SOURCE LINE # 73
0011 900000      R     MOV     DPTR,#ri
0014 F0                MOVX    @DPTR,A
0015 A3                INC     DPTR
0016 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 74
0017 900000      R     MOV     DPTR,#ori
001A F0                MOVX    @DPTR,A
001B A3                INC     DPTR
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 75
001D 900000      R     MOV     DPTR,#rbit
0020 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 77
0021         ?C0005:
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 8   

                                           ; SOURCE LINE # 78
0021 900000      R     MOV     DPTR,#ri
0024 E0                MOVX    A,@DPTR
0025 FE                MOV     R6,A
0026 A3                INC     DPTR
0027 E0                MOVX    A,@DPTR
0028 FF                MOV     R7,A
0029 900000      R     MOV     DPTR,#ori
002C E0                MOVX    A,@DPTR
002D 6E                XRL     A,R6
002E 7003              JNZ     ?C0045
0030 A3                INC     DPTR
0031 E0                MOVX    A,@DPTR
0032 6F                XRL     A,R7
0033         ?C0045:
0033 600F              JZ      ?C0007
                                           ; SOURCE LINE # 79
0035 900000      R     MOV     DPTR,#ori
0038 EE                MOV     A,R6
0039 F0                MOVX    @DPTR,A
003A A3                INC     DPTR
003B EF                MOV     A,R7
003C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 80
003D E4                CLR     A
003E A3                INC     DPTR
003F F0                MOVX    @DPTR,A
0040 A3                INC     DPTR
0041 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 81
0042 80DD              SJMP    ?C0005
0044         ?C0007:
                                           ; SOURCE LINE # 82
0044 900000      R     MOV     DPTR,#change
0047 E4                CLR     A
0048 75F001            MOV     B,#01H
004B 120000      E     LCALL   ?C?IILDX
004E FE                MOV     R6,A
004F D3                SETB    C
0050 E5F0              MOV     A,B
0052 940A              SUBB    A,#0AH
0054 EE                MOV     A,R6
0055 6480              XRL     A,#080H
0057 9480              SUBB    A,#080H
0059 40C6              JC      ?C0005
                                           ; SOURCE LINE # 83
005B E4                CLR     A
005C 900000      R     MOV     DPTR,#i
005F F0                MOVX    @DPTR,A
0060 A3                INC     DPTR
0061 F0                MOVX    @DPTR,A
0062         ?C0010:
0062 900000      R     MOV     DPTR,#i
0065 E0                MOVX    A,@DPTR
0066 FE                MOV     R6,A
0067 A3                INC     DPTR
0068 E0                MOVX    A,@DPTR
0069 FF                MOV     R7,A
006A C3                CLR     C
006B 9414              SUBB    A,#014H
006D EE                MOV     A,R6
006E 6480              XRL     A,#080H
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 9   

0070 9480              SUBB    A,#080H
0072 5031              JNC     ?C0011
                                           ; SOURCE LINE # 84
0074 7400        R     MOV     A,#LOW rbuff
0076 2F                ADD     A,R7
0077 F582              MOV     DPL,A
0079 7400        R     MOV     A,#HIGH rbuff
007B 3E                ADDC    A,R6
007C F583              MOV     DPH,A
007E E0                MOVX    A,@DPTR
007F FF                MOV     R7,A
0080 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 85
0083 900000      R     MOV     DPTR,#i
0086 E0                MOVX    A,@DPTR
0087 FE                MOV     R6,A
0088 A3                INC     DPTR
0089 E0                MOVX    A,@DPTR
008A 2400        R     ADD     A,#LOW rbuff
008C F582              MOV     DPL,A
008E 7400        R     MOV     A,#HIGH rbuff
0090 3E                ADDC    A,R6
0091 F583              MOV     DPH,A
0093 E4                CLR     A
0094 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 86
0095 900000      R     MOV     DPTR,#i+01H
0098 E0                MOVX    A,@DPTR
0099 04                INC     A
009A F0                MOVX    @DPTR,A
009B 70C5              JNZ     ?C0010
009D 900000      R     MOV     DPTR,#i
00A0 E0                MOVX    A,@DPTR
00A1 04                INC     A
00A2 F0                MOVX    @DPTR,A
00A3         ?C0046:
00A3 80BD              SJMP    ?C0010
00A5         ?C0011:
                                           ; SOURCE LINE # 87
00A5 7FFF              MOV     R7,#0FFH
00A7 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
                                           ; SOURCE LINE # 90
00AA 020000      R     LJMP    ?C0005
             ; FUNCTION cd_run (END)

             ; FUNCTION test_pin_slow (BEGIN)
                                           ; SOURCE LINE # 94
                                           ; SOURCE LINE # 96
                                           ; SOURCE LINE # 97
0000 8036              SJMP    ?C0051
0002         ?C0014:
                                           ; SOURCE LINE # 98
0002 900000      R     MOV     DPTR,#a
0005 E5A0              MOV     A,P2
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 99
0008 A3                INC     DPTR
0009 E5A0              MOV     A,P2
000B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 100
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 10  

000C E0                MOVX    A,@DPTR
000D FE                MOV     R6,A
000E 900000      R     MOV     DPTR,#a
0011 E0                MOVX    A,@DPTR
0012 FF                MOV     R7,A
0013 6E                XRL     A,R6
0014 602B              JZ      ?C0016
                                           ; SOURCE LINE # 101
0016 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 102
0019 900000      R     MOV     DPTR,#b
001C E0                MOVX    A,@DPTR
001D FF                MOV     R7,A
001E 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 103
0021 900000      R     MOV     DPTR,#count
0024 E0                MOVX    A,@DPTR
0025 A3                INC     DPTR
0026 FF                MOV     R7,A
0027 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 104
002A 900000      R     MOV     DPTR,#count
002D A3                INC     DPTR
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 105
0033 7FFF              MOV     R7,#0FFH
0035 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 107
0038         ?C0051:
0038 E4                CLR     A
0039 900000      R     MOV     DPTR,#count
003C F0                MOVX    @DPTR,A
003D A3                INC     DPTR
003E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 108
003F 80C1              SJMP    ?C0014
0041         ?C0016:
                                           ; SOURCE LINE # 109
0041 900000      R     MOV     DPTR,#count+01H
0044 E0                MOVX    A,@DPTR
0045 04                INC     A
0046 F0                MOVX    @DPTR,A
0047 70B9              JNZ     ?C0014
0049 900000      R     MOV     DPTR,#count
004C E0                MOVX    A,@DPTR
004D 04                INC     A
004E F0                MOVX    @DPTR,A
004F         ?C0047:
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
004F 80B1              SJMP    ?C0014
             ; FUNCTION test_pin_slow (END)

             ; FUNCTION test_buff (BEGIN)
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#count
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 11  

0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 117
0007         ?C0019:
                                           ; SOURCE LINE # 118
0007 E4                CLR     A
0008 900000      R     MOV     DPTR,#i
000B F0                MOVX    @DPTR,A
000C A3                INC     DPTR
000D F0                MOVX    @DPTR,A
000E         ?C0021:
000E 120000      R     LCALL   L?0055
0011 4003              JC      $ + 5H
0013 020000      R     LJMP    ?C0022
                                           ; SOURCE LINE # 119
0016 120000      R     LCALL   L?0053
                                           ; SOURCE LINE # 120
0019 7400        R     MOV     A,#LOW buff+01H
001B 2F                ADD     A,R7
001C F582              MOV     DPL,A
001E 7400        R     MOV     A,#HIGH buff+01H
0020 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 121
0023 7400        R     MOV     A,#LOW buff+02H
0025 2F                ADD     A,R7
0026 F582              MOV     DPL,A
0028 7400        R     MOV     A,#HIGH buff+02H
002A 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 122
002D 7400        R     MOV     A,#LOW buff+03H
002F 2F                ADD     A,R7
0030 F582              MOV     DPL,A
0032 7400        R     MOV     A,#HIGH buff+03H
0034 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 123
0037 7400        R     MOV     A,#LOW buff+04H
0039 2F                ADD     A,R7
003A F582              MOV     DPL,A
003C 7400        R     MOV     A,#HIGH buff+04H
003E 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 124
0041 7400        R     MOV     A,#LOW buff+05H
0043 2F                ADD     A,R7
0044 F582              MOV     DPL,A
0046 7400        R     MOV     A,#HIGH buff+05H
0048 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 125
004B 7400        R     MOV     A,#LOW buff+06H
004D 2F                ADD     A,R7
004E F582              MOV     DPL,A
0050 7400        R     MOV     A,#HIGH buff+06H
0052 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 126
0055 7400        R     MOV     A,#LOW buff+07H
0057 2F                ADD     A,R7
0058 F582              MOV     DPL,A
005A 7400        R     MOV     A,#HIGH buff+07H
005C 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 127
005F 7400        R     MOV     A,#LOW buff+08H
0061 2F                ADD     A,R7
0062 F582              MOV     DPL,A
0064 7400        R     MOV     A,#HIGH buff+08H
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 12  

0066 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 128
0069 7400        R     MOV     A,#LOW buff+09H
006B 2F                ADD     A,R7
006C F582              MOV     DPL,A
006E 7400        R     MOV     A,#HIGH buff+09H
0070 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 129
0073 7400        R     MOV     A,#LOW buff+0AH
0075 2F                ADD     A,R7
0076 F582              MOV     DPL,A
0078 7400        R     MOV     A,#HIGH buff+0AH
007A 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 130
007D 7400        R     MOV     A,#LOW buff+0BH
007F 2F                ADD     A,R7
0080 F582              MOV     DPL,A
0082 7400        R     MOV     A,#HIGH buff+0BH
0084 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 131
0087 7400        R     MOV     A,#LOW buff+0CH
0089 2F                ADD     A,R7
008A F582              MOV     DPL,A
008C 7400        R     MOV     A,#HIGH buff+0CH
008E 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 132
0091 7400        R     MOV     A,#LOW buff+0DH
0093 2F                ADD     A,R7
0094 F582              MOV     DPL,A
0096 7400        R     MOV     A,#HIGH buff+0DH
0098 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 133
009B 7400        R     MOV     A,#LOW buff+0EH
009D 2F                ADD     A,R7
009E F582              MOV     DPL,A
00A0 7400        R     MOV     A,#HIGH buff+0EH
00A2 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 134
00A5 7400        R     MOV     A,#LOW buff+0FH
00A7 2F                ADD     A,R7
00A8 F582              MOV     DPL,A
00AA 7400        R     MOV     A,#HIGH buff+0FH
00AC 120000      R     LCALL   L?0054
                                           ; SOURCE LINE # 135
00AF 900000      R     MOV     DPTR,#i+01H
00B2 E0                MOVX    A,@DPTR
00B3 2410              ADD     A,#010H
00B5 F0                MOVX    @DPTR,A
00B6 900000      R     MOV     DPTR,#i
00B9 E0                MOVX    A,@DPTR
00BA 3400              ADDC    A,#00H
00BC F0                MOVX    @DPTR,A
00BD 020000      R     LJMP    ?C0021
00C0         ?C0022:
                                           ; SOURCE LINE # 136
00C0 E4                CLR     A
00C1 900000      R     MOV     DPTR,#i
00C4 F0                MOVX    @DPTR,A
00C5 A3                INC     DPTR
00C6 F0                MOVX    @DPTR,A
00C7         ?C0024:
00C7 120000      R     LCALL   L?0055
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 13  

00CA 4003              JC      $ + 5H
00CC 020000      R     LJMP    ?C0019
                                           ; SOURCE LINE # 137
00CF 120000      R     LCALL   L?0058
00D2 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 138
00D5 900000      R     MOV     DPTR,#i+01H
00D8 E0                MOVX    A,@DPTR
00D9 04                INC     A
00DA F0                MOVX    @DPTR,A
00DB 70EA              JNZ     ?C0024
00DD 900000      R     MOV     DPTR,#i
00E0 E0                MOVX    A,@DPTR
00E1 04                INC     A
00E2 F0                MOVX    @DPTR,A
00E3         ?C0048:
00E3 80E2              SJMP    ?C0024
             ; FUNCTION test_buff (END)

             ; FUNCTION test_uart (BEGIN)
                                           ; SOURCE LINE # 146
                                           ; SOURCE LINE # 148
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#a
0004 F0                MOVX    @DPTR,A
0005         ?C0028:
                                           ; SOURCE LINE # 149
0005 900000      R     MOV     DPTR,#a
0008 E0                MOVX    A,@DPTR
0009 FF                MOV     R7,A
000A 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 150
000D 900000      R     MOV     DPTR,#a
0010 E0                MOVX    A,@DPTR
0011 04                INC     A
0012 F0                MOVX    @DPTR,A
0013 80F0              SJMP    ?C0028
             ; FUNCTION test_uart (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 154
                                           ; SOURCE LINE # 155
                                           ; SOURCE LINE # 158
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#i
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 159
0007 A3                INC     DPTR
0008 04                INC     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 162
000A 75A01F            MOV     P2,#01FH
                                           ; SOURCE LINE # 163
000D 120000      E     LCALL   init_uart
                                           ; SOURCE LINE # 165
0010 120000      R     LCALL   cd_run
                                           ; SOURCE LINE # 170
0013         ?C0032:
                                           ; SOURCE LINE # 171
;---- Variable 'buffi' assigned to Register 'R6/R7' ----
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 14  

0013 E4                CLR     A
0014 FF                MOV     R7,A
0015 FE                MOV     R6,A
                                           ; SOURCE LINE # 172
0016         ?C0034:
                                           ; SOURCE LINE # 173
0016 A2A4              MOV     C,COMCLK
0018 E4                CLR     A
0019 33                RLC     A
001A FD                MOV     R5,A
;---- Variable 'clk' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 174
001B 900000      R     MOV     DPTR,#nextclk
001E E0                MOVX    A,@DPTR
001F B505F4            CJNE    A,AR5,?C0034
                                           ; SOURCE LINE # 175
0022 120000      R     LCALL   L?0053
                                           ; SOURCE LINE # 176
0025 ED                MOV     A,R5
0026 6004              JZ      ?C0037
0028 7D00              MOV     R5,#00H
002A 8002              SJMP    ?C0038
002C         ?C0037:
002C 7D01              MOV     R5,#01H
002E         ?C0038:
002E 900000      R     MOV     DPTR,#nextclk
0031 ED                MOV     A,R5
0032 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 177
0033 0F                INC     R7
0034 EF                MOV     A,R7
0035 7001              JNZ     ?C0049
0037 0E                INC     R6
0038         ?C0049:
0038 120000      R     LCALL   L?0057
003B 40D9              JC      ?C0034
003D         ?C0035:
                                           ; SOURCE LINE # 180
003D E4                CLR     A
003E 900000      R     MOV     DPTR,#i
0041 F0                MOVX    @DPTR,A
0042 A3                INC     DPTR
0043 F0                MOVX    @DPTR,A
0044         ?C0040:
0044 900000      R     MOV     DPTR,#i
0047 120000      R     LCALL   L?0056
004A 50C7              JNC     ?C0032
                                           ; SOURCE LINE # 181
004C 120000      R     LCALL   L?0058
004F 120000      E     LCALL   _SendData
                                           ; SOURCE LINE # 182
0052 900000      R     MOV     DPTR,#i+01H
0055 E0                MOVX    A,@DPTR
0056 04                INC     A
0057 F0                MOVX    @DPTR,A
0058 70EA              JNZ     ?C0040
005A 900000      R     MOV     DPTR,#i
005D E0                MOVX    A,@DPTR
005E 04                INC     A
005F F0                MOVX    @DPTR,A
0060         ?C0050:
0060 80E2              SJMP    ?C0040
C51 COMPILER V9.01   FIRE                                                                  07/01/2017 15:20:36 PAGE 15  

             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    799    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    791      21
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
